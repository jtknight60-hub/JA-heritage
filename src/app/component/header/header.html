<header class="site-header" [class.shrink]="headerShrunk()">
	<div class="container">
		<div class="brand">
			<a routerLink="/" class="logo">JA Heritage</a>
		</div>

		<nav class="nav" role="navigation">
			<ul class="nav-list" [class.open]="menuOpen()">
				<li *ngFor="let link of navLinks" (click)="menuOpen.set(false)">
					<a routerLink="{{ link.path }}" routerLinkActive="active">{{ link.label }}</a>
				</li>
			</ul>
		</nav>

		<div class="actions">
			<a routerLink="/cart" class="cart" aria-label="View cart">
				<!-- cart icon -->
				<svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
					<path d="M7 4h-2l-1 2h2l3.6 7.59-1.35 2.45A1 1 0 0 0 8.99 17h8.72a1 1 0 0 0 .9-.56l3.24-6.2A1 1 0 0 0 21.5 8H6.21" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
				</svg>
				<span class="label">Cart</span>
				<span class="badge" *ngIf="cart.cartCount() > 0" [class.pulse]="badgePulse()">{{ cart.cartCount() }}</span>
			</a>
			<ng-container *ngIf="session(); else signedOut">
				<div class="logged-in">
					<span class="user-greet">Hi, {{ session().name || session().email }}</span>
					<button class="signout" (click)="logout()" aria-label="Sign out">
						<!-- logout icon -->
						<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
							<path d="M16 17l5-5-5-5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M21 12H9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M9 19H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					</button>
				</div>
			</ng-container>
			<ng-template #signedOut>
				<a routerLink="/login" class="login" aria-label="Sign in">
					<!-- user icon -->
					<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
						<path d="M12 12a5 5 0 1 0 0-10 5 5 0 0 0 0 10zM3 21a9 9 0 0 1 18 0" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
					</svg>
					<span class="label">Sign in</span>
				</a>
			</ng-template>

			<button class="menu-toggle" aria-label="Toggle menu" (click)="toggleMenu()" [attr.aria-expanded]="menuOpen()">
				<span class="hamburger" [class.open]="menuOpen()">
					<span></span><span></span><span></span>
				</span>
			</button>
		</div>
	</div>
</header>
